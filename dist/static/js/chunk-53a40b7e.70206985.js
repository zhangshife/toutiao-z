(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53a40b7e"],{"159b":function(t,e,n){var r=n("da84"),a=n("fdbc"),i=n("17c2"),c=n("9112");for(var s in a){var o=r[s],l=o&&o.prototype;if(l&&l.forEach!==i)try{c(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,a=n("a640"),i=n("ae40"),c=a("forEach"),s=i("forEach");t.exports=c&&s?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},2423:function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return l}));var r=n("b775"),a=function(t){return Object(r["a"])({url:"/v1_1/articles",method:"get",params:t})},i=function(t){return Object(r["a"])({method:"GET",url:"/v1_0/articles/".concat(t)})},c=function(t){return Object(r["a"])({url:"/v1_0/article/collections",method:"POST",data:{target:t}})},s=function(t){return Object(r["a"])({url:"/v1_0/article/likings/".concat(t),method:"DELETE"})},o=function(t){return Object(r["a"])({method:"POST",url:"/v1_0/article/likings",data:{target:t}})},l=function(t){return Object(r["a"])({method:"DELETE",url:"/v1_0/article/likings/".concat(t)})}},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),a=n("825a"),i=n("d039"),c=n("ad6d"),s="toString",o=RegExp.prototype,l=o[s],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=s;(u||f)&&r(RegExp.prototype,s,(function(){var t=a(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in o)?c.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},"288c":function(t,e,n){"use strict";n("3ab2")},2909:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){if(Array.isArray(t))return r(t)}n.d(e,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("fb6a"),n("b0c0"),n("25f0");function c(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t){return a(t)||i(t)||c(t)||s()}},"30cd":function(t,e,n){"use strict";n("bb7d")},"3ab2":function(t,e,n){},"3e94":function(t,e,n){"use strict";n("813a")},4160:function(t,e,n){"use strict";var r=n("23e7"),a=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"4df4":function(t,e,n){"use strict";var r=n("0366"),a=n("7b0b"),i=n("9bdd"),c=n("e95a"),s=n("50c4"),o=n("8418"),l=n("35a1");t.exports=function(t){var e,n,u,f,d,h,p=a(t),v="function"==typeof this?this:Array,m=arguments.length,b=m>1?arguments[1]:void 0,g=void 0!==b,x=l(p),C=0;if(g&&(b=r(b,m>2?arguments[2]:void 0,2)),void 0==x||v==Array&&c(x))for(e=s(p.length),n=new v(e);e>C;C++)h=g?b(p[C],C):p[C],o(n,C,h);else for(f=x.call(p),d=f.next,n=new v;!(u=d.call(f)).done;C++)h=g?i(f,b,[u.value,C],!0):u.value,o(n,C,h);return n.length=C,n}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",c=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),o=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:o(1),end:o(2),trim:o(3)}},7156:function(t,e,n){var r=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var i,c;return a&&"function"==typeof(i=e.constructor)&&i!==n&&r(c=i.prototype)&&c!==n.prototype&&a(t,c),t}},"7abe":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-container"},[n("van-nav-bar",{staticClass:"page-nav-bar"},[n("van-button",{staticClass:"search-btn",attrs:{slot:"title",type:"info",size:"small",round:"",icon:"search",to:"/search"},slot:"title"},[t._v("搜索")])],1),n("van-tabs",{staticClass:"channel-tabs",attrs:{swipeable:"",animated:"",border:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._l(t.userChannels,(function(t,e){return n("van-tab",{key:e,attrs:{title:t.name}},[n("article-list",{attrs:{channel:t}})],1)})),n("div",{staticClass:"placeholder",attrs:{slot:"nav-right"},slot:"nav-right"}),n("div",{staticClass:"hamburger-btn",attrs:{slot:"nav-right"},on:{click:function(e){t.isEditChannelShow=!0}},slot:"nav-right"},[n("i",{staticClass:"iconfont icongengduo"})])],2),n("van-popup",{staticClass:"edit-channel-popup",style:{height:"100%"},attrs:{position:"bottom",closeable:"","close-icon-position":"top-left"},model:{value:t.isEditChannelShow,callback:function(e){t.isEditChannelShow=e},expression:"isEditChannelShow"}},[n("channel-edit",{attrs:{"user-channels":t.userChannels,activeIndex:t.active},on:{"update-index":function(e){t.active=e},close:function(e){t.isEditChannelShow=!1}}})],1)],1)},a=[],i=(n("96cf"),n("1da1")),c=n("b775"),s=function(){return Object(c["a"])({url:"/v1_0/user/channels",method:"get"})},o=function(){return Object(c["a"])({url:"/v1_0/channels",method:"get"})},l=function(t){return Object(c["a"])({method:"PATCH",url:"/v1_0/user/channels",data:{channels:t}})},u=function(t){return Object(c["a"])({method:"DELETE",url:"/v1_0/user/channels/".concat(t)})},f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-list"},[n("van-pull-refresh",{attrs:{"success-text":t.successText,"success-duration":"1000"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败,点击重新加载"},on:{load:t.onLoad,"update:error":function(e){t.error=e}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,e){return n("article-item",{key:e,attrs:{article:t}})})),1)],1)],1)},d=[],h=n("2909"),p=n("2423"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-cell",{staticClass:"article-item",attrs:{to:{name:"article",params:{articleId:t.article.art_id}}}},[n("div",{staticClass:"title van-multi-ellipsis--l2",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.article.title))]),n("div",{attrs:{slot:"label"},slot:"label"},[3===t.article.cover.type?n("div",{staticClass:"cover-wrap"},t._l(t.article.cover.images,(function(t,e){return n("div",{key:e,staticClass:"cover-item"},[n("van-image",{staticClass:"cover-item-img",attrs:{fit:"cover",src:t}})],1)})),0):t._e(),n("div",{staticClass:"label-info-wrap"},[n("span",[t._v(t._s(t.article.aut_name))]),n("span",[t._v(t._s(t.article.comm_count)+"评论")]),n("span",[t._v(t._s(t._f("relativeTime")(t.article.pubdate)))])])]),1===t.article.cover.type?n("van-image",{staticClass:"right-cover",attrs:{slot:"default",fit:"cover",src:t.article.cover.images[0]},slot:"default"}):t._e()],1)},m=[],b={name:"ArticleItem",components:{},props:{article:{type:Object,required:!0}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},g=b,x=(n("3e94"),n("2877")),C=Object(x["a"])(g,v,m,!1,null,"0fc6b055",null),E=C.exports,_={name:"ArticleList",components:{ArticleItem:E},props:{channel:{type:Object,required:!0}},data:function(){return{list:[],loading:!1,finished:!1,timestamp:Date.now(),error:!1,isLoading:!1,successText:""}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{onLoad:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,Math.random()>.5&&console.log(JSON.parse("abc")),e.next=4,Object(p["f"])({channel_id:t.channel.id,timestamp:t.timestamp,with_top:1});case 4:r=e.sent,a=r.data,(n=t.list).push.apply(n,Object(h["a"])(a.data.results)),t.loading=!1,a.data.results.length<10?t.finished=!0:t.timestamp=a.data.pre_timestamp,e.next=16;break;case 11:e.prev=11,e.t0=e["catch"](0),t.$toast.fail("获取列表数据失败"),t.error=!0,t.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[0,11]])})))()},onRefresh:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p["f"])({channel_id:t.channel.id,timestamp:Date.now(),with_top:1});case 3:r=e.sent,a=r.data,console.log(a),(n=t.list).unshift.apply(n,Object(h["a"])(a.data.results)),t.successText="以为刷新".concat(a.data.results.length,"条数据"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$toast.fail("获取列表数据失败");case 13:t.isLoading=!1;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}},y=_,w=(n("30cd"),Object(x["a"])(y,f,d,!1,null,"06f46272",null)),k=w.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"channel-edit"},[n("van-cell",{attrs:{border:!1}},[n("div",{staticClass:"title-text",attrs:{slot:"title"},slot:"title"},[t._v("我的频道")]),n("van-button",{staticClass:"edit-btn",attrs:{type:"danger",plain:"",round:"",size:"mini"},on:{click:function(e){t.isEditShow=!t.isEditShow}}},[t._v(t._s(t.isEditShow?"完成":"编辑"))])],1),n("van-grid",{staticClass:"my-grid",attrs:{gutter:10}},t._l(t.userChannels,(function(e,r){return n("van-grid-item",{key:r,staticClass:"grid-item",on:{click:function(n){return t.onUserChannelClick(e,r)}}},[t.isEditShow&&"推荐"!==e.name?n("van-icon",{attrs:{slot:"icon",name:"clear"},slot:"icon"}):t._e(),n("span",{staticClass:"text",class:{active:t.activeIndex===r},attrs:{slot:"text"},slot:"text"},[t._v(t._s(e.name))])],1)})),1),n("van-cell",{attrs:{border:!1}},[n("div",{staticClass:"title-text",attrs:{slot:"title"},slot:"title"},[t._v("频道推荐")])]),n("van-grid",{staticClass:"recommend-grid",attrs:{gutter:10}},t._l(t.recommendChannels,(function(e,r){return n("van-grid-item",{key:r,staticClass:"grid-item",attrs:{icon:"plus",text:e.name},on:{click:function(n){return t.addToChannel(e)}}})})),1)],1)},O=[],S=(n("c740"),n("4160"),n("a434"),n("b0c0"),n("a9e3"),n("159b"),n("5d2d")),I={name:"ChannelEdit",components:{},props:{userChannels:{type:Array,required:!0},activeIndex:{type:Number,required:!0}},data:function(){return{allChannels:[],isEditShow:!1}},computed:{recommendChannels:function(){var t=this,e=[];return this.allChannels.forEach((function(n){var r=t.userChannels.findIndex((function(t){return t.id===n.id}));-1===r&&e.push(n)})),e}},watch:{},created:function(){this.loadGetAllChannels()},mounted:function(){},methods:{loadGetAllChannels:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:n=e.sent,r=n.data,t.allChannels=r.data.channels,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$toast.fail("获取所有频道列表失败");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},addToChannel:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.userChannels.push(t),!e.$store.state.user){n.next=12;break}return n.prev=2,n.next=5,l([{id:t.id,seq:e.userChannels.length}]);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](2),e.$toast.fail("保存失败");case 10:n.next=13;break;case 12:Object(S["b"])("TOUTIAO_USER_CHANNEL",e.userChannels);case 13:case"end":return n.stop()}}),n,null,[[2,7]])})))()},onUserChannelClick:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!n.isEditShow){r.next=18;break}if("推荐"===t.name){r.next=16;break}if(e<=n.activeIndex&&n.$emit("update-index",n.activeIndex-1),n.userChannels.splice(e,1),!n.$store.state.user){r.next=15;break}return r.prev=5,r.next=8,u(t.id);case 8:r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](5),n.$toast.fail("删除失败");case 13:r.next=16;break;case 15:Object(S["b"])("TOUTIAO_USER_CHANNEL",n.userChannels);case 16:r.next=20;break;case 18:n.$emit("update-index",e),n.$emit("close");case 20:case"end":return r.stop()}}),r,null,[[5,10]])})))()}}},j=I,N=(n("288c"),Object(x["a"])(j,A,O,!1,null,"964d36e0",null)),T=N.exports,R={name:"HomePage",components:{ArticleList:k,ChannelEdit:T},props:{},data:function(){return{active:0,userChannels:[],isEditChannelShow:!1}},computed:{},watch:{},created:function(){this.loadUserChannel()},mounted:function(){},methods:{loadUserChannel:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n=[],!t.$store.state.user){e.next=10;break}return e.next=5,s();case 5:r=e.sent,a=r.data,n=a.data.channels,e.next=20;break;case 10:if(i=Object(S["a"])("TOUTIAO_USER_CHANNEL"),!i){e.next=15;break}n=i,e.next=20;break;case 15:return e.next=17,s();case 17:c=e.sent,o=c.data,n=o.data.channels;case 20:t.userChannels=n,e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](0),t.$toast.fail("获取频道数据失败");case 26:case"end":return e.stop()}}),e,null,[[0,23]])})))()}}},L=R,$=(n("c000"),Object(x["a"])(L,r,a,!1,null,"0dd2831a",null));e["default"]=$.exports},"7fce":function(t,e,n){},"813a":function(t,e,n){},8418:function(t,e,n){"use strict";var r=n("c04e"),a=n("9bf2"),i=n("5c6c");t.exports=function(t,e,n){var c=r(e);c in t?a.f(t,c,i(0,n)):t[c]=n}},"9bdd":function(t,e,n){var r=n("825a"),a=n("2a62");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(c){throw a(t),c}}},a434:function(t,e,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),c=n("50c4"),s=n("7b0b"),o=n("65f0"),l=n("8418"),u=n("1dde"),f=n("ae40"),d=u("splice"),h=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,v=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!h},{splice:function(t,e){var n,r,u,f,d,h,g=s(this),x=c(g.length),C=a(t,x),E=arguments.length;if(0===E?n=r=0:1===E?(n=0,r=x-C):(n=E-2,r=v(p(i(e),0),x-C)),x+n-r>m)throw TypeError(b);for(u=o(g,r),f=0;f<r;f++)d=C+f,d in g&&l(u,f,g[d]);if(u.length=r,n<r){for(f=C;f<x-r;f++)d=f+r,h=f+n,d in g?g[h]=g[d]:delete g[h];for(f=x;f>x-r+n;f--)delete g[f-1]}else if(n>r)for(f=x-r;f>C;f--)d=f+r-1,h=f+n-1,d in g?g[h]=g[d]:delete g[h];for(f=0;f<n;f++)g[f+C]=arguments[f+2];return g.length=x-r+n,u}})},a630:function(t,e,n){var r=n("23e7"),a=n("4df4"),i=n("1c7e"),c=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:c},{from:a})},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},a9e3:function(t,e,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),c=n("6eeb"),s=n("5135"),o=n("c6b6"),l=n("7156"),u=n("c04e"),f=n("d039"),d=n("7c73"),h=n("241c").f,p=n("06cf").f,v=n("9bf2").f,m=n("58a8").trim,b="Number",g=a[b],x=g.prototype,C=o(d(x))==b,E=function(t){var e,n,r,a,i,c,s,o,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=m(l),e=l.charCodeAt(0),43===e||45===e){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(i=l.slice(2),c=i.length,s=0;s<c;s++)if(o=i.charCodeAt(s),o<48||o>a)return NaN;return parseInt(i,r)}return+l};if(i(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var _,y=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof y&&(C?f((function(){x.valueOf.call(n)})):o(n)!=b)?l(new g(E(e)),n,y):E(e)},w=r?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),k=0;w.length>k;k++)s(g,_=w[k])&&!s(y,_)&&v(y,_,p(g,_));y.prototype=x,x.constructor=y,c(a,b,y)}},ad6d:function(t,e,n){"use strict";var r=n("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b0c0:function(t,e,n){var r=n("83ab"),a=n("9bf2").f,i=Function.prototype,c=i.toString,s=/^\s*function ([^ (]*)/,o="name";r&&!(o in i)&&a(i,o,{configurable:!0,get:function(){try{return c.call(this).match(s)[1]}catch(t){return""}}})},bb7d:function(t,e,n){},c000:function(t,e,n){"use strict";n("7fce")},c740:function(t,e,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,i=n("44d2"),c=n("ae40"),s="findIndex",o=!0,l=c(s);s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o||!l},{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},fb6a:function(t,e,n){"use strict";var r=n("23e7"),a=n("861d"),i=n("e8b5"),c=n("23cb"),s=n("50c4"),o=n("fc6a"),l=n("8418"),u=n("b622"),f=n("1dde"),d=n("ae40"),h=f("slice"),p=d("slice",{ACCESSORS:!0,0:0,1:2}),v=u("species"),m=[].slice,b=Math.max;r({target:"Array",proto:!0,forced:!h||!p},{slice:function(t,e){var n,r,u,f=o(this),d=s(f.length),h=c(t,d),p=c(void 0===e?d:e,d);if(i(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?a(n)&&(n=n[v],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return m.call(f,h,p);for(r=new(void 0===n?Array:n)(b(p-h,0)),u=0;h<p;h++,u++)h in f&&l(r,u,f[h]);return r.length=u,r}})}}]);
//# sourceMappingURL=chunk-53a40b7e.70206985.js.map